const e=Array.isArray,t=e=>"[object Object]"===Object.prototype.toString.call(e),s=e=>"function"==typeof e,i=e=>"string"==typeof e,n=window,r=document,l=e=>r.createElement(e),a=(e,t)=>e.appendChild(t),o=e=>r.createTextNode(e),u=e=>e.toLowerCase(),d=e=>e.toUpperCase(),c=(e,t,s)=>e.addEventListener(t,s),h=(e,t,s)=>e.removeEventListener(t,s),m=(((e,t,s,i)=>(c(i=i||n,"scroll",()=>e&&i.scrollTo(t,s)),{lock:()=>{e=!0,t=i.pageXOffset,s=i.pageYOffset},letGo:()=>e=!1}))(),"adoptedStyleSheets"in document),p=e=>{let t=l("style");return a(t,o("")),a(e||r.head,t),e=>(a(t,o(e)),t)},b=p(),g=(p(),/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|^--/i),f=e=>requestAnimationFrame(e),v=e=>{var t={},s=e=>e.startsWith("-")?e:e.replace(/\W+\w/g,e=>d(e.slice(-1))),i=e.split(";").map(e=>e.split(":").map(e=>e&&e.trim()));for(var[n,r]of i){let e=s(n);e&&(t[e]=r)}return t},y={},w=(e,t)=>{t=t||String;try{if(t==Boolean?e=[!0,1,"","1","true"].includes(e):"string"==typeof e&&(e=t==Number?Number(e):t==Object||t==Array?JSON.parse(e):e),{}.toString.call(e)==`[object ${t.name}]`)return{value:e,error:t==Number&&Number.isNaN(e)}}catch(e){}return{value:e,error:!0}},S=(s,i,n)=>{null===n||!1===n?s.removeAttribute(i):s.setAttribute(i,((e,t)=>!(!e.getAttribute||!e.localName)&&(t=e.getAttribute("is"),e.localName.includes("-")||t&&t.includes("-")))(s)&&(t(n)||e(n))?JSON.stringify(n):n)},q=e=>u(e.replace(/([A-Z])/g,"-$1")),k=e=>e.replace(/-(\w)/g,(e,t)=>d(t)),N=(e,t)=>{for(let s in t)e[s]=t[s];return e},C=e=>0===Object.keys(e||{}).length;window.chrome;var x=window.navigator;x.vendor,window.opr,x.userAgent.indexOf("Edge"),x.userAgent.match("CriOS");const A=(e,t,s)=>Object.defineProperty(e,t,s);var E=(e,t)=>e.removeChild(t),$=(e,t,s)=>e.insertBefore(t,s),T={},R=[],O=R.map,L="#document-fragment",V=function(e){this.handlers[e.type](e)},M=e=>{if(!C(e.handlers))for(let t in e.handlers)h(e,t,V),delete e.handlers[t]},j=e=>{M(e),[].concat(...e.childNodes).forEach(e=>{M(e),j(e)})},U=(e,t,s,i)=>{"-"===t[0]?e.setProperty(t,s):e[t]=i?s:((e,t)=>"number"==typeof t&&!1===g.test(e)?t+"px":t)(t,s)},_=(e,s,i)=>(e=>(e=>e?e.split(/\s+/).filter(e=>e):[])(t(e)?((e,t)=>{t="";for(let s in e)e[s]&&(t+=(t&&" ")+s);return t})(e):e))(s).forEach(t=>e.classList[i](t)),F=(e,t,n,r,l)=>{if("key"===t||"children"===t);else if(!t.startsWith("on")||t in e)"ref"===t&&s(r)?r(e):"style"===t?((t,s,n)=>{let r=e.style;if(i(s))return r.cssText=s;if(i(n)&&(r.cssText="",n=null),n)for(let e in n)s&&e in s||U(r,e,"");if(s)for(let e in s)n&&s[e]===n[e]||U(r,e,s[e])})(0,r,n):"className"===t||"class"===t?(_(e,n,"remove"),_(e,r,"add")):!l&&"list"!==t&&t in e?e[t]=null==r?"":r:S(e,t,r);else{let s=u(t)in e?u(t.slice(2)):u(t[2])+t.substring(3);r?(n||c(e,s,V),(e.handlers||(e.handlers={}))[s]=r):h(e,s,V)}},P=(e,t)=>{var s=3===e.type?o(e.name):(t=t||"svg"===e.name)?r.createElementNS("http://www.w3.org/2000/svg",e.name):e.name===L?r.createDocumentFragment():l(e.name),i=e.props;for(var n in i)s.nodeName!==L&&F(s,n,null,i[n],t);for(var u=0,d=e.children.length;u<d;u++)a(s,P(e.children[u],t));return e.node=s},z=e=>null==e?null:e.key,B=e=>(j(e),e.destroy&&e.destroy(e),e),H=(e,t,s,i,n)=>{if(s===i);else if(null!=s&&3===s.type&&3===i.type)s.name!==i.name&&(t.nodeValue=i.name);else if(null==s||s.name!==i.name)t=$(e,P(i,n),t),null!=s&&E(e,B(s.node));else{var r,l,a,o,u=s.props,d=i.props,c=s.children,h=i.children,m=0,p=0,b=c.length-1,g=h.length-1;for(var f in n=n||"svg"===i.name,((e,t,s)=>{for(var i in s={},e)s[i]=e[i];for(var i in t)s[i]=t[i];return s})(u,d)){var v=u[f],y=d[f];(["value","selected","checked"].includes(f)?t[f]:v)!==y&&i.name!==L&&F(t,f,v,y,n)}for(;p<=g&&m<=b&&null!=(a=z(c[m]))&&a===z(h[p]);)H(t,c[m].node,c[m++],h[p++],n);for(;p<=g&&m<=b&&null!=(a=z(c[b]))&&a===z(h[g]);)H(t,c[b].node,c[b--],h[g--],n);if(m>b)for(;p<=g;)$(t,P(h[p++],n),(l=c[m])&&l.node);else if(p>g)for(;m<=b;)E(t,B(c[m++].node));else{for(var w=m,S={},q={};w<=b;w++)null!=(a=c[w].key)&&(S[a]=c[w]);for(;p<=g;)a=z(l=c[m]),o=z(h[p]),q[a]||null!=o&&o===z(c[m+1])?(null==a&&E(t,B(l.node)),m++):null==o||1===s.type?(null==a&&(H(t,l&&l.node,l,h[p],n),p++),m++):(a===o?(H(t,l.node,l,h[p],n),q[o]=!0,m++):null!=(r=S[o])?(H(t,$(t,r.node,l&&l.node),r,h[p],n),q[o]=!0):H(t,l&&l.node,null,h[p],n),p++);for(;m<=b;)null==z(l=c[m++])&&E(t,B(l.node));for(var w in S)null==q[w]&&E(t,B(S[w].node))}}return i.node=t},I=(e,t,s,i,n,r)=>({name:e,props:t,children:s,node:i,type:r,key:n}),D=(e,t)=>I(e,T,R,t,null,3),W=e=>3===e.nodeType?D(e.nodeValue,e):I(u(e.nodeName),T,O.call(e.childNodes,W),e,null,1),Q=(e,t)=>{e.__mountPoint||a(e,e.__mountPoint=l(t.name===L?"template":t.name));let s=t.name===L&&e.nodeName===L?e:e.__mountPoint;return(e=e.__mountPoint=H(s.parentNode,s,s.vdom||W(s),t)).vdom=t,e},J=function(t,i){for(var n,r=[],l=[],a=arguments.length;a-- >2;)r.push(arguments[a]);for(null!=(i=null==i?{}:i).children&&(r.length<=0&&r.push(i.children),delete i.children);r.length>0;)if(e(n=r.pop()))for(a=n.length;a-- >0;)r.push(n[a]);else!1===n||!0===n||null==n||l.push("object"==typeof n?n:D(n));return s(t)?(i.children=i.children||l)&&t(i):I(t,i,l,null,i.key)};let X="props",G=Symbol(),Y=":host, *, *::before, *::after {box-sizing: border-box;} ",Z={};const K=e=>{for(;e.parentNode&&(e=e.parentNode);)if(e instanceof ShadowRoot)return e;return document};class ee extends HTMLElement{constructor(){super(),this.context=Z,this.unsubs=[],this.state={};let{initAttrs:i,shadow:n,rootSheet:r,noRerender:l,tag:a}=this.constructor,o=n?this.attachShadow({mode:["open","closed"].includes(n)?n:"open"}):this;this[X]={},this.render=this.render.bind(this),this.mounted=new Promise(e=>this._mount=e);const u=t=>{let s=n?o:K(this),i="";return t.forEach(t=>{if(m){let i=e(t)?t[0]:t;i&&![].concat(s.adoptedStyleSheets).includes(i)&&(s.adoptedStyleSheets=[...s.adoptedStyleSheets,i])}else e(t)&&t[1]&&(i+=t[1])}),i};let d=!1,c="";const h=({css:s,noResets:i,globalFallback:l,useStyleTag:o,styleSheets:h,children:p})=>{m&&u([r]);let g=s||t(p[0])&&p[0].name||"";return!i&&n&&(g=Y+g),!d&&e(h)&&(c=u(h),d=!0),m||!l||y[a]?!m||o?J("style",null,g+c):0===r.cssRules.length?(r.replaceSync(g),null):null:(y[a]=!0,b(g+c),null)};let p;const g=({children:e,...t})=>{let s=J(L,{},e);if(!this.hasMounted&&C(t))return p=!0,s;if(p&&C(t))return s;p=!1;let i={},n=0,r=this.attributes;for(n=r.length;n--;){let e=r[n].name;i["class"===e?"className":e]=r[n].value}for(let e in t)F(this,e,i[e],t[e]);return s};this.setState=e=>(N(this.state,s(e)?e(this.state):e||{}),this.update()),this.observeObi=e=>[].concat(e).forEach(e=>e.$onChange&&this.unsubs.push(e.$onChange(this.update)));const w=()=>(this._watchesForStyleUpdates&&(this[X].style=v(this.style.cssText)),[N({Host:g,CSS:h,host:this},this[X]),this.state,this.context]);let S;const q=()=>{let e=w();this.willMount(...e),this.willRender(...e);let t=this.render(...e);t?Q(o,t):S=!0,f(()=>{this.unsubs.push(this.lifeCycle(...e)),this.didRender(...e),this.didMount(...e),this.hasMounted=!0})},k=()=>{let e=w(),t=this.willRender(...e);this.willUpdate(...e),this.shouldUpdate&&(t=this.shouldUpdate(...e)),l||S||!t&&void 0!==t||(Q(o,this.render(...e)),this.didUpdate(...e),this.didRender(...e))};let x;this.update=()=>(this.processing||(this.processing=this.mounted.then(e=>{this.hasMounted?k():q(),this.processing=!1})),this.processing),this.emit=(e,t,s,i)=>(s||this).dispatchEvent(new CustomEvent(e,N({detail:t,bubbles:!0,composed:!0},i||{}))),this.destroy=e=>{x||(e&&j(e),this.unsubs.forEach(e=>s(e)&&e()),x=!0)};let A=i.length;for(;A--;)i[A](this);this.update()}connectedCallback(){this.hasMounted||(this.state.$onChange&&this.unsubs.push(this.state.$onChange(this.update)),this.observe&&this.observeObi(this.observe),this._mount())}disconnectedCallback(){this.isConnected||(this.willUnmount(),this.destroy())}attributeChangedCallback(e,t,s){this[G]!==e&&t!==s&&("style"===e&&this._watchesForStyleUpdates?this.update():this[k(e)]=s)}static get observedAttributes(){let{propTypes:e,prototype:t}=this;if(this.initAttrs=[],!e)return[];let s=Object.keys(e).map(s=>{let i=q(s),n=e[s].name?{type:e[s]}:e[s];return s in t||A(t,s,{get(){return this[X][s]},set(e){let{value:t,error:r}=w(e,n.type);r&&null!=t&&console.error(`[${s}] must be type [${n.type.name}]`),t!==this[X][s]&&(n.reflect&&this.mounted.then(()=>{this[G]=i,S(this,i,n.type!==Boolean||t?t:null),this[G]=!1}),this[X][s]=t,this.update())}}),n.value&&this.initAttrs.push(e=>e[s]=n.value),i});return this.prototype._watchesForStyleUpdates=s.includes("style"),s}willMount(){}willRender(){}render(){}didRender(){}willUpdate(){}didUpdate(){}didMount(){}lifeCycle(){}willUnmount(){}}const te=(e,t,s)=>{var i,n;s=s||{};let r,l=t.prototype instanceof ee;return m&&(r=new CSSStyleSheet),l&&(t.rootSheet=r,t.tag=e),customElements.define(e,l?t:(n=i=class extends ee{constructor(...e){super(...e),this.render=t}},i.rootSheet=r,i.tag=e,i.propTypes=s.propTypes,i.shadow=s.shadow,i.noRerender=s.noRerender,n)),(t,s)=>J(e,t,s)};let se=0;const ie=["Make sweet library","make cool apps","test library","go buy dog food","register vehicles"].map(e=>({id:se++,name:e,completed:!1})),ne={list:ie,displayList:ie,todoName:"",searchValue:"",testValue:!0,makeABunch(){ne.displayList=ne.list=[...ne.list,..."Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Massa enim nec dui nunc mattis enim ut. Risus nullam eget felis eget. Sagittis eu volutpat odio facilisis. Nulla aliquet enim tortor at. Bibendum ut tristique et egestas quis ipsum suspendisse. Sollicitudin aliquam ultrices sagittis orci a. In hac habitasse platea dictumst quisque sagittis purus sit. Fermentum odio eu feugiat pretium nibh ipsum consequat nisl vel. Lectus magna fringilla urna porttitor rhoncus dolor purus non enim. Quisque egestas diam in arcu cursus euismod quis viverra nibh. Morbi quis commodo odio aenean sed adipiscing diam donec. Nunc id cursus metus aliquam eleifend mi in. Et netus et malesuada fames ac turpis egestas integer eget. Libero justo laoreet sit amet. Egestas pretium aenean pharetra magna ac. Habitasse platea dictumst quisque sagittis purus.\n\nVolutpat odio facilisis mauris sit amet massa vitae tortor condimentum. Amet est placerat in egestas erat imperdiet sed euismod. Sed blandit libero volutpat sed cras ornare. Facilisi cras fermentum odio eu feugiat pretium nibh. Pellentesque sit amet porttitor eget dolor morbi non arcu risus. Maecenas volutpat blandit aliquam etiam erat velit scelerisque in. Facilisis gravida neque convallis a cras. Quam viverra orci sagittis eu volutpat. Nibh praesent tristique magna sit amet purus gravida quis. Nibh cras pulvinar mattis nunc sed blandit. Quis auctor elit sed vulputate mi sit amet. Faucibus purus in massa tempor nec feugiat. Vitae et leo duis ut diam quam. Pretium fusce id velit ut tortor pretium viverra suspendisse. Donec pretium vulputate sapien nec sagittis. Viverra aliquet eget sit amet.\n\nEget duis at tellus at urna. Sem et tortor consequat id porta nibh venenatis cras sed. Nunc sed augue lacus viverra vitae congue eu consequat ac. Cursus risus at ultrices mi tempus imperdiet nulla malesuada. Tristique sollicitudin nibh sit amet commodo nulla facilisi. Ac odio tempor orci dapibus ultrices in iaculis nunc. Nam at lectus urna duis convallis. Ultrices eros in cursus turpis massa. Ac odio tempor orci dapibus ultrices in iaculis. Nisl vel pretium lectus quam id leo in vitae turpis. Neque convallis a cras semper auctor neque vitae tempus. Viverra aliquet eget sit amet tellus cras. Turpis tincidunt id aliquet risus feugiat. Eu mi bibendum neque egestas congue.\n\nAt augue eget arcu dictum. Cursus eget nunc scelerisque viverra mauris in. Adipiscing tristique risus nec feugiat in fermentum posuere. Pellentesque eu tincidunt tortor aliquam nulla facilisi. Eu volutpat odio facilisis mauris sit. Mi sit amet mauris commodo quis imperdiet. Varius quam quisque id diam vel quam elementum pulvinar. Nunc mattis enim ut tellus elementum. Ultricies mi eget mauris pharetra. Turpis cursus in hac habitasse. Morbi tincidunt ornare massa eget egestas purus viverra accumsan. Lacus luctus accumsan tortor posuere ac ut consequat semper. Dignissim convallis aenean et tortor at. Id diam maecenas ultricies mi eget mauris.\n\nCommodo nulla facilisi nullam vehicula ipsum. Diam quis enim lobortis scelerisque fermentum dui. Ridiculus mus mauris vitae ultricies leo integer. Est velit egestas dui id. Euismod nisi porta lorem mollis aliquam. Quis auctor elit sed vulputate mi sit amet. Interdum varius sit amet mattis vulputate enim nulla aliquet. Fames ac turpis egestas maecenas pharetra. Sociis natoque penatibus et magnis dis parturient. Nunc eget lorem dolor sed viverra ipsum nunc.".split(" ").map(e=>({id:se++,name:e,completed:!1}))]},removeTodo(e){let t=ne.list.filter(t=>t.id!==e.id),s=0===ne.searchValue.length?t:t.filter(e=>-1!==e.name.search(ne.searchValue));ne.list=[...t],ne.displayList=[...s]},setSearchValue(e){ne.searchValue=e,e=e.toLowerCase(),ne.displayList=0===e.length?[...ne.list]:[...ne.list.filter(t=>-1!==t.name.toLowerCase().search(e))]},addTodo(e){e&&e.preventDefault(),ne.list.push({name:ne.todoName,id:se++,completed:!1}),ne.displayList=ne.list=[...ne.list],ne.searchValue=ne.todoName=""},captureEnter(e){13===(e.keyCode||e.which)&&ne.addTodo(e)}},re=(e,i)=>{const{sub:n,notify:r}=(()=>{let e=[],t=(t,s)=>{let i=[];for(s=e.length;s--;)e[s]===t?t=null:i.push(e[s]);e=i};return{unsub:t,sub:s=>(e.push(s),()=>t(s)),notify:t=>e.forEach(e=>e&&e(t))}})();let l=a=>{if(a.$obi)return a;A(a,"$obi",{enumerable:!1,value:!0}),A(a,"$batching",{enumerable:!1,value:{active:!1}}),A(a,"$onChange",{enumerable:!1,value:e=>n(e)}),!i&&A(a,"$uniqueNotifiers",{enumerable:!1,value:!0}),A(a,"$getState",{enumerable:!1,value:()=>Object.keys(a).reduce((e,i)=>s(a[i])?e:(e[i]=t(a[i])&&a[i].$obi?a[i].$getState():a[i],e),{})}),A(a,"$merge",{enumerable:!1,value:(t,i)=>{a.$batching.active=!0,s(t)?t(e):N(e,t),a.$batching.active=!1,!i&&r(e)}});for(let n in a){let o=a[n];s(o)||n.startsWith("$")||(t(o)&&(o=i?l(a[n]):re(a[n])),A(a,n,{enumerable:!0,get:()=>o,set(t){t!==o&&(o=t,e.$batching.active||r(e))}}))}return a};return l(e)};var le,ae;b("   \n    html {\n            -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n            -webkit-font-smoothing: antialiased;\n            -moz-osx-font-smoothing: grayscale;\n            -ms-text-size-adjust: 100%;\n            -webkit-text-size-adjust: 100%;\n        }\n\n        html, body {\n            height: 100%;\n            width: 100%;\n            margin: 0;\n            padding: 0;\n            display: flex;\n            flex-direction: column;\n            flex: 1 0 auto;\n        }\n\n        .asdf {\n            color: pink;\n        }\n\n        .derp {\n            /*background: purple;*/\n        }\n\n        *, *::before,\n        *::after {\n            box-sizing: border-box;\n        }\n\n        .red {\n            color: red\n        }\n\n        .yellow {\n            color: yellow\n        }\n    ");let oe=":host,*,*::before,*::after{box-sizing:border-box}:host{display:block}";te("list-item",class extends ee{constructor(...e){super(...e),this.state={bool:!0}}lifeCycle(){return()=>{}}render({Host:e,host:t},{bool:s}){return J(e,{style:{background:s?"green":"red"},className:s?"yellow":"red"},J("style",null,oe+":host(.red){color:red} :host(.yellow){color:yellow}"),J("button",{onClick:()=>this.setState({bool:!s})},"click me"),J("span",{style:{fontWeight:"bold",padding:10}},J("slot",null)))}}),te("x-move",class extends ee{constructor(...e){super(...e),this.move=()=>{this.derp.insertBefore(this.redRef,this.blueRef)}}render({Host:e}){return J(e,{style:{width:"100%",border:"2px solid purple","--bg":"red"}},J("style",null,oe),J("button",{onClick:this.move},"toggle move"),J("div",{ref:e=>this.derp=e,style:{width:"100%"}},J("div",{ref:e=>this.greenRef=e,style:{width:"100%",background:"green",padding:10,"--bg":"red"}},J("h3",null,"Im green!")),J("div",{ref:e=>this.blueRef=e,style:{width:"100%",background:"blue"}},J("h3",null,"Im blue!")),J("div",{ref:e=>this.redRef=e,style:{width:"100%",background:"red"}},J("h3",null,"Im red!"))))}});const ue=te("x-box",class extends ee{render({Host:e,host:t},{bool:s=!0}){return J("div",{style:{background:"aliceblue"}},J("button",{onClick:()=>this.emit("hideClick","hello")}," hide me"),J("span",{style:{fontSize:30,fontWeight:"bold"}},"hello"))}}),de=te("x-app",(ae=le=class extends ee{constructor(...e){super(...e),this.state={bool:!0,count:0},this.observe=re(ne)}render({Host:e,CSS:t,host:s,...i},{bool:n,count:r},l){return J(e,{style:{width:"100%"}},J(t,null,":host{display:block}"),J("button",{onClick:()=>this.setState({count:r+1}),className:""===ne.todoName?"derp":null,children:"TODOS!!!!"+r}),J("button",{onClick:()=>this.setState({bool:!n})}," show me"),J("div",null,n?J(ue,{onHideClick:()=>this.setState({bool:!n})}):J("div",null)),J("button",{onClick:ne.makeABunch},"make a bunch!!!"),"... i dare you",J("br",null),J("br",null),J("input",{placeholder:"add todo",value:ne.todoName,onInput:e=>ne.todoName=e.target.value}),J("button",{onClick:ne.addTodo,style:"color:blue"},"Add todo !!! :"),J("br",null),J("input",{placeholder:"search",value:ne.searchValue,onInput:e=>ne.setSearchValue(e.target.value)}),J("div",{style:"width:100%;display:flex"},J("ul",null,ne.displayList.map(e=>J("li",{key:e.id,style:{padding:20}},J("button",{onClick:()=>ne.removeTodo(e)},"X"),J("x-list-item",{className:n?"red":"yellow",style:{background:n?"purple":"blue"}},J("b",null,e.name)))))))}},le.shadow=!0,le.propTypes={some:String,cool:Boolean,prop:Number,types:Object,arrrrr:Array},ae));export{de as App};
