let t=document,i=i=>t.createElement(i),e=(t,i)=>t.appendChild(i),s=i=>t.createTextNode(i),r=r=>{let l=i("style");return e(l,s("")),e(r||t.head,l),t=>(e(l,s(t)),l)},l=r(),h=r(),n=(t,i)=>{i=i||String;try{if(i==Boolean?t=[!0,1,"","1","true"].includes(t):"string"==typeof t&&(t=i==Number?Number(t):i==Object||i==Array?JSON.parse(t):t),{}.toString.call(t)==`[object ${i.name}]`)return{value:t,error:i==Number&&Number.isNaN(t)}}catch(t){}return{value:t,error:!0}},o=(t,i,e)=>{null===e||!1===e?t.removeAttribute(i):t.setAttribute(i,((t,i)=>!(!t.getAttribute||!t.localName)&&(i=t.getAttribute("is"),t.localName.includes("-")||i&&i.includes("-")))(t)&&(c(e)||a(e))?JSON.stringify(e):e)},u=t=>t.replace(/([A-Z])/g,"-$1").toLowerCase(),f=t=>t.replace(/-(\w)/g,(t,i)=>i.toUpperCase()),a=Array.isArray,c=t=>"[object Object]"===Object.prototype.toString.call(t),d=t=>"function"==typeof t,b=t=>"string"==typeof t,p=(t,i,e)=>t.removeEventListener(i,e),v=(t,i,e)=>Object.defineProperty(t,i,e),m=(t,i)=>{for(let e in i)t[e]=i[e];return t};h(" .___ {visibility: inherit;}",!0);var y=(t,i)=>t.removeChild(i),g=(t,i,e)=>t.insertBefore(i,e),w=t=>t.toLowerCase(),j={},O=[],k=O.map,N="#document-fragment",_=(t,i)=>i,x=(t,i,e)=>{for(var s in e={},t)e[s]=t[s];for(var s in i)e[s]=i[s];return e},C=function(t){this.handlers[t.type](t)},$=t=>{[].concat(...t.childNodes).forEach(t=>{if(t.handlers)for(let i in t.handlers)p(t,i,C);$(t)})},A=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|^--/i,S=(t,i,e)=>{"-"===i[0]?t.setProperty(i,e):t[i]="number"==typeof e&&!1===A.test(i)?e+"px":e},T=(t,i,e)=>(t=>t?t.split(/\s+/).filter(t=>t):[])(c(i)?((t,i)=>{i="";for(let e in t)t[e]&&(i+=(i&&" ")+e);return i})(i):i).forEach(i=>t.classList[e](i)),B=(t,i,e,s,r)=>{if("key"===i);else if(!d(s)||!i.startsWith("on")||i in t)"ref"===i&&d(s)?s(t):"style"===i?((i,e,s,r)=>{if(r=t.style,b(e))return r.cssText=e;if(b(s)&&(r.cssText="",s=null),s)for(let t in s)e&&t in e||S(r,t,"");if(e)for(let t in e)s&&e[t]===s[t]||S(r,t,e[t])})(0,s,e):"className"===i||"class"===i?(T(t,e,"remove"),T(t,s,"add")):!r&&"list"!==i&&i in t?t[i]=null==s?"":s:o(t,i,s);else{let r=w(i)in t?w(i.slice(2)):w(i[2])+i.substring(3);((t.handlers||(t.handlers={}))[i=r]=s)?e||((t,i,e)=>t.addEventListener(i,e))(t,i,C):p(t,i,C)}},E=(r,l)=>{var h=3===r.type?s(r.name):(l=l||"svg"===r.name)?t.createElementNS("http://www.w3.org/2000/svg",r.name):r.name===N?t.createDocumentFragment():i(r.name),n=r.props;for(var o in n)B(h,o,null,n[o],l);for(var u=0,f=r.children.length;u<f;u++)e(h,E(r.children[u],l));return r.node=h},H=t=>null==t?null:t.key,J=t=>(t.t&&t.t(t),t),R=(t,i,e,s,r)=>{if(e===s);else if(null!=e&&3===e.type&&3===s.type)e.name!==s.name&&(i.nodeValue=s.name);else if(null==e||e.name!==s.name)i=g(t,E(s,r),i),null!=e&&y(t,J(e.node));else{var l,h,n,o,u=e.props,f=s.props,a=e.children,c=s.children,d=0,b=0,p=a.length-1,v=c.length-1;for(var m in r=r||"svg"===s.name,x(u,f)){let t=u[m],e=f[m];(["value","selected","checked"].includes(m)?i[m]:t)!==e&&B(i,m,t,e,r)}for(;b<=v&&d<=p&&null!=(n=H(a[d]))&&n===H(c[b]);)R(i,a[d].node,a[d++],c[b++],r);for(;b<=v&&d<=p&&null!=(n=H(a[p]))&&n===H(c[v]);)R(i,a[p].node,a[p--],c[v--],r);if(d>p)for(;b<=v;)g(i,E(c[b++],r),(h=a[d])&&h.node);else if(b>v)for(;d<=p;)y(i,J(a[d++].node));else{for(var w=d,j={},O={};w<=p;w++)null!=(n=a[w].key)&&(j[n]=a[w]);for(;b<=v;)n=H(h=a[d]),o=H(c[b]),O[n]||null!=o&&o===H(a[d+1])?(null==n&&y(i,J(h.node)),d++):null==o||1===e.type?(null==n&&(R(i,h&&h.node,h,c[b],r),b++),d++):(n===o?(R(i,h.node,h,c[b],r),O[o]=!0,d++):null!=(l=j[o])?(R(i,g(i,l.node,h&&h.node),l,c[b],r),O[o]=!0):R(i,h&&h.node,null,c[b],r),b++);for(;d<=p;)null==H(h=a[d++])&&y(i,J(h.node));for(var w in j)null==O[w]&&y(i,J(j[w].node))}}return s.node=i},z=(t,i,e,s,r,l)=>({name:t,props:i,children:e,node:s,type:l,key:r}),L=(t,i)=>z(t,j,O,i,null,3),M=t=>3===t.nodeType?L(t.nodeValue,t):z(w(t.nodeName),j,k.call(t.childNodes,M),t,null,1),P=(t,i)=>((t=R(t.parentNode,t,t.vdom||M(t),i)).vdom=i,t),Z=function(t,i){for(var e,s=[],r=[],l=arguments.length;l-- >2;)s.push(arguments[l]);for(;s.length>0;)if(a(e=s.pop()))for(l=e.length;l-- >0;)s.push(e[l]);else!1===e||!0===e||null==e||r.push(c(e)?e:L(e));return i=i||j,d(t)?t(i,r):z(t,i,r,null,i.key)};let q=Symbol(),D=Symbol(),F={};class G extends HTMLElement{constructor(){super(),this.context=F,this.i=[],this.s={},this.state={},this.Host=(t,i)=>{this.l=!0;let e=x(this.s,t);if(Object.keys(e).length)for(let i in e)B(this,i,this.s[i],t[i]);return this.s=t,Z(N,{},i)},this.setState=t=>{m(this.state,d(t)?t(this.state):t||{}),this.update()},this.observeObi=(...t)=>t.forEach(t=>t.$onChange&&this.i.push(t.$onChange(this.update))),this.update=()=>(this.h||(this.h=this.o.then(t=>{t=[m({Host:this.Host},this[q]),this.state,this.context],this.u?this.p(...t):this.v(...t),this.h=!1})),this.h),this.v=(...t)=>{this.willRender(...t);let s=this.render(...t),r=i(this.l?"template":s.name);e(this.m,r),this.g=P(this.l?this.m:r,s),this.didRender(...t),this.u=!0,setTimeout(()=>{this.i.push(this.lifeCycle()),this.classList.add("___")})},this.p=(...t)=>{let i=this.willRender();(i||void 0===i)&&(P(this.l?this.m:this.g,this.render(...t)),this.didRender())},this.t=t=>{t&&$(t),this.i.forEach(t=>t&&t()),this.j=!0},this.attachShadow({mode:"open"}),this.m=this.shadowRoot||this,this[q]={},this.render=this.render.bind(this),this.o=new Promise(t=>this.O=t),this.update();let{k:t}=this.constructor,s=t.length;for(;s--;)t[s](this)}connectedCallback(){this.u||(this.state.$onChange&&this.i.push(this.state.$onChange(this.update)),this.observe&&this.observeObi(this.observe),this.O())}adoptedCallback(){}attributeChangedCallback(t,i,e){t!==this[D]&&i!==e&&(this[f(t)]=e)}static get observedAttributes(){let{propTypes:t,prototype:i}=this;return this.k=[],t?Object.keys(t).map(e=>{let s=u(e),r=t[e].name?{type:t[e]}:t[e];return e in i||v(i,e,{get(){return this[q][e]},set(t){let{value:i,error:l}=n(t,r.type);if(l&&null!=i)throw`[${e}] must be type [${r.type.name}]`;i!==this[q][e]&&(r.reflect&&this.o.then(()=>{this[D]=s,o(this,s,r.type!==Boolean||i?i:null),this[D]=!1}),this[q][e]=i,this.update())}}),r.value&&this.k.push(t=>t[e]=r.value),s}):[]}lifeCycle(){}willRender(){}render(){}didRender(){}disconnectedCallback(){!this.j&&this.t()}}const I=(t,i,e)=>{var s,r;return(t=>h(`${t} {visibility:hidden}`))(t),customElements.define(t,i.prototype instanceof G?i:(r=s=class extends G{constructor(...t){super(...t),this.render=i}},s.propTypes=e,r)),(i,e)=>Z(t,i,e)},K=(t,i,e)=>I("x-"+t,i,e);export{_ as Fragment,G as Xelement,F as context,I as element,l as globalStyles,Z as h,K as x};
