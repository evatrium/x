!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@iosio/util"),require("@iosio/obi")):"function"==typeof define&&define.amd?define(["exports","@iosio/util","@iosio/obi"],t):t((n=n||self).pwc={},n.util,n.obi)}(this,function(n,t,r){"use strict";function e(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function u(n,t){for(var r=0;r<t.length;r++){var e=t[r];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(n,e.key,e)}}function i(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&f(n,t)}function o(n){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)})(n)}function f(n,t){return(f=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n})(n,t)}function c(n,t,r){return(c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}()?Reflect.construct:function(n,t,r){var e=[null];e.push.apply(e,t);var u=new(Function.bind.apply(n,e));return r&&f(u,r.prototype),u}).apply(null,arguments)}function l(n){var t="function"==typeof Map?new Map:void 0;return(l=function(n){if(null===n||(r=n,-1===Function.toString.call(r).indexOf("[native code]")))return n;var r;if("function"!=typeof n)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(n))return t.get(n);t.set(n,e)}function e(){return c(n,arguments,o(this).constructor)}return e.prototype=Object.create(n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),f(e,n)})(n)}function a(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function s(n,t){return!t||"object"!=typeof t&&"function"!=typeof t?a(n):t}function v(n){return function(n){if(Array.isArray(n)){for(var t=0,r=new Array(n.length);t<n.length;t++)r[t]=n[t];return r}}(n)||function(n){if(Symbol.iterator in Object(n)||"[object Arguments]"===Object.prototype.toString.call(n))return Array.from(n)}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var h=document,b=function(n){return h.createElement(n)},y=function(n,t){return n.appendChild(t)},d=function(n){return h.createTextNode(n)},p=function(n){var t=b("style");return y(t,d("")),y(n||h.head,t),function(n){return y(t,d(n)),t}},m=p(),w=p(),g=function(n,r,e){var u,i;null===e||!1===e?n.removeAttribute(r):n.setAttribute(r,(u=n).getAttribute&&u.localName&&(i=u.getAttribute("is"),u.localName.includes("-")||i&&i.includes("-"))&&(t.isObj(e)||t.isArray(e))?JSON.stringify(e):e)};w(" .___ {visibility: inherit;}",!0);var j=function(n,t){return n.removeChild(t)},k=function(n,t,r){return n.insertBefore(t,r)},O=function(n){return n.toLowerCase()},A={},x=[],E=x.map,R="#document-fragment",S=function(n,t,r){for(var e in r={},n)r[e]=n[e];for(var e in t)r[e]=t[e];return r},_=function(n){this.handlers[n.type](n)},C=function n(r){var e;(e=[]).concat.apply(e,v(r.childNodes)).forEach(function(r){if(r.handlers)for(var e in r.handlers)t.removeListener(r,e,_);n(r)})},N=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|^--/i,T=function(n,t,r){"-"===t[0]?n.setProperty(t,r):n[t]="number"==typeof r&&!1===N.test(t)?r+"px":r},M=function(n,r,e){return function(n){return n?n.split(/\s+/).filter(function(n){return n}):[]}(t.isObj(r)?function(n,t){for(var r in t="",n)n[r]&&(t+=(t&&" ")+r);return t}(r):r).forEach(function(t){return n.classList[e](t)})},q=function(n,r,e,u,i){if("key"===r);else if(!t.isFunc(u)||!r.startsWith("on")||r in n)"ref"===r&&t.isFunc(u)?u(n):"style"===r?function(r,e,u,i){if(i=n.style,t.isString(e))return i.cssText=e;if(t.isString(u)&&(i.cssText="",u=null),u)for(var o in u)e&&o in e||T(i,o,"");if(e)for(var f in e)u&&e[f]===u[f]||T(i,f,e[f])}(0,u,e):"className"===r||"class"===r?(M(n,e,"remove"),M(n,u,"add")):!i&&"list"!==r&&r in n?n[r]=null==u?"":u:g(n,r,u);else{var o=O(r)in n?O(r.slice(2)):O(r[2])+r.substring(3);((n.handlers||(n.handlers={}))[r=o]=u)?e||t.addListener(n,r,_):t.removeListener(n,r,_)}},B=function n(t,r){var e=3===t.type?d(t.name):(r=r||"svg"===t.name)?h.createElementNS("http://www.w3.org/2000/svg",t.name):"#document-fragment"===t.name?h.createDocumentFragment():b(t.name),u=t.props;for(var i in u)q(e,i,null,u[i],r);for(var o=0,f=t.children.length;o<f;o++)y(e,n(t.children[o],r));return t.node=e},D=function(n){return null==n?null:n.key},F=function(n){return n.t&&n.t(n),n},H=function(n,t,r,e,u,i){return{name:n,props:t,children:r,node:e,type:i,key:u}},J=function(n,t){return H(n,A,x,t,null,3)},P=function(n,t){return(n=function n(t,r,e,u,i){if(e===u);else if(null!=e&&3===e.type&&3===u.type)e.name!==u.name&&(r.nodeValue=u.name);else if(null==e||e.name!==u.name)r=k(t,B(u,i),r),null!=e&&j(t,F(e.node));else{var o,f,c,l,a=e.props,s=u.props,v=e.children,h=u.children,b=0,y=0,d=v.length-1,p=h.length-1;for(var m in i=i||"svg"===u.name,S(a,s)){var w=a[m],g=s[m];(["value","selected","checked"].includes(m)?r[m]:w)!==g&&q(r,m,w,g,i)}for(;y<=p&&b<=d&&null!=(c=D(v[b]))&&c===D(h[y]);)n(r,v[b].node,v[b++],h[y++],i);for(;y<=p&&b<=d&&null!=(c=D(v[d]))&&c===D(h[p]);)n(r,v[d].node,v[d--],h[p--],i);if(b>d)for(;y<=p;)k(r,B(h[y++],i),(f=v[b])&&f.node);else if(y>p)for(;b<=d;)j(r,F(v[b++].node));else{for(var O=b,A={},x={};O<=d;O++)null!=(c=v[O].key)&&(A[c]=v[O]);for(;y<=p;)c=D(f=v[b]),l=D(h[y]),x[c]||null!=l&&l===D(v[b+1])?(null==c&&j(r,F(f.node)),b++):null==l||1===e.type?(null==c&&(n(r,f&&f.node,f,h[y],i),y++),b++):(c===l?(n(r,f.node,f,h[y],i),x[l]=!0,b++):null!=(o=A[l])?(n(r,k(r,o.node,f&&f.node),o,h[y],i),x[l]=!0):n(r,f&&f.node,null,h[y],i),y++);for(;b<=d;)null==D(f=v[b++])&&j(r,F(f.node));for(var O in A)null==x[O]&&j(r,F(A[O].node))}}return u.node=r}(n.parentNode,n,n.vdom||function n(t){return 3===t.nodeType?J(t.nodeValue,t):H(O(t.nodeName),A,E.call(t.childNodes,n),t,null,1)}(n),t)).vdom=t,n},$=function(n,r){for(var e,u=[],i=[],o=arguments.length;o-- >2;)u.push(arguments[o]);for(;u.length>0;)if(t.isArray(e=u.pop()))for(o=e.length;o-- >0;)u.push(e[o]);else!1===e||!0===e||null==e||i.push(t.isObj(e)?e:J(e));return r=r||A,t.isFunc(n)?n(r,i):H(n,r,i,null,r.key)},z=Symbol(),I=Symbol(),L={},Z=function(n){function r(){var n;e(this,r),(n=s(this,o(r).call(this))).context=L,n.u=[],n.i={},n.state={},n.Host=function(t,r){for(var e in n.o=!0,S(t,n.i))q(a(n),e,n.i[e],t[e]);return n.i=t,$(R,{},r)},n.setState=function(r){t.extend(n.state,t.isFunc(r)?r(n.state):r||{}),n.update()},n.observeObi=function(){for(var t=arguments.length,r=new Array(t),e=0;e<t;e++)r[e]=arguments[e];return r.forEach(function(t){return t.$onChange&&n.u.push(t.$onChange(n.update))})},n.update=function(){return n.l||(n.l=n.s.then(function(r){var e,u;r=[t.extend({Host:n.Host},n[z]),n.state,n.context],n.v?(u=n).p.apply(u,v(r)):(e=n).m.apply(e,v(r)),n.l=!1})),n.l},n.m=function(){for(var t,r,e=arguments.length,u=new Array(e),i=0;i<e;i++)u[i]=arguments[i];(t=n).willRender.apply(t,u);var o=(r=n).render.apply(r,u),f=b(n.o?"template":o.name);y(n.g,f),n.j=P(n.o?n.g:f,o),setTimeout(function(){var t,r;n.classList.add("___"),(t=n).didRender.apply(t,u),n.u.push((r=n).lifeCycle.apply(r,u))}),n.v=!0},n.p=function(){var t;n.willRender()||(P(n.o?n.g:n.j,(t=n).render.apply(t,arguments)),n.didRender())},n.emit=function(t,r,e){return(e||a(n)).dispatchEvent(new CustomEvent(t,{detail:r,bubbles:!0,composed:!0}))},n.t=function(t){t&&C(t),n.u.forEach(function(n){return n&&n()}),n.k=!0},n[z]={},n.render=n.render.bind(a(n)),n.s=new Promise(function(t){return n.O=t}),n.update();for(var u=n.constructor.A,i=u.length;i--;)u[i](a(n));return n}var f,c,h;return i(r,l(HTMLElement)),f=r,h=[{key:"observedAttributes",get:function(){var n=this,r=this.propTypes,e=this.prototype;return this.A=[],r?Object.keys(r).map(function(u){var i=function(n){return n.replace(/([A-Z])/g,"-$1").toLowerCase()}(u),o=r[u].name?{type:r[u]}:r[u];return u in e||t.def(e,u,{get:function(){return this[z][u]},set:function(n){var t=this,r=function(n,t){t=t||String;try{if(t==Boolean?n=[!0,1,"","1","true"].includes(n):"string"==typeof n&&(n=t==Number?Number(n):t==Object||t==Array?JSON.parse(n):n),{}.toString.call(n)=="[object ".concat(t.name,"]"))return{value:n,error:t==Number&&Number.isNaN(n)}}catch(n){}return{value:n,error:!0}}(n,o.type),e=r.value;if(r.error&&null!=e)throw"[".concat(u,"] must be type [").concat(o.type.name,"]");e!==this[z][u]&&(o.reflect&&this.s.then(function(){t[I]=i,g(t,i,o.type!==Boolean||e?e:null),t[I]=!1}),this[z][u]=e,this.update())}}),o.value&&n.A.push(function(n){return n[u]=o.value}),i}):[]}}],(c=[{key:"connectedCallback",value:function(){this.v||(this.attachShadow({mode:"open"}),this.g=this.shadowRoot||this,this.state.$onChange&&this.u.push(this.state.$onChange(this.update)),this.observe&&this.observeObi(this.observe),this.O())}},{key:"attributeChangedCallback",value:function(n,t,r){n!==this[I]&&t!==r&&(this[function(n){return n.replace(/-(\w)/g,function(n,t){return t.toUpperCase()})}(n)]=r)}},{key:"lifeCycle",value:function(){}},{key:"willRender",value:function(){}},{key:"render",value:function(){}},{key:"didRender",value:function(){}},{key:"disconnectedCallback",value:function(){!this.k&&this.t()}}])&&u(f.prototype,c),h&&u(f,h),r}(),G=function(n,t,r){var u,f;return function(n){w("".concat(n," {visibility:hidden}"))}(n),customElements.define(n,t.prototype instanceof Z?t:(f=u=function(n){function r(){var n,u;e(this,r);for(var i=arguments.length,f=new Array(i),c=0;c<i;c++)f[c]=arguments[c];return(u=s(this,(n=o(r)).call.apply(n,[this].concat(f)))).render=t,u}return i(r,Z),r}(),u.propTypes=r,f)),function(t,r){return $(n,t,r)}};n.Fragment=function(n,t){return t},n.Xelement=Z,n.context=L,n.element=G,n.globalStyles=m,n.h=$,n.provide=function(n,e){var u=t.isFunc(e)?r.obi(e(L)):t.isObj(e)?r.obi(e):e;return L[n]=u,u},n.x=function(n,t,r){return G("x-"+n,t,r)},Object.defineProperty(n,"R",{value:!0})});
