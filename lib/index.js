let t=document,e=e=>t.createElement(e),i=(t,e)=>t.appendChild(e),s=e=>t.createTextNode(e),l=t=>t.toLowerCase(),r=l=>{let r=e("style");return i(r,s("")),i(l||t.head,r),t=>(i(r,s(t)),r)},n=r(),h=r(),o=(t,e)=>{e=e||String;try{if(e==Boolean?t=[!0,1,"","1","true"].includes(t):"string"==typeof t&&(t=e==Number?Number(t):e==Object||e==Array?JSON.parse(t):t),{}.toString.call(t)==`[object ${e.name}]`)return{value:t,error:e==Number&&Number.isNaN(t)}}catch(t){}return{value:t,error:!0}},u=(t,e,i)=>{null===i||!1===i?t.removeAttribute(e):t.setAttribute(e,((t,e)=>!(!t.getAttribute||!t.localName)&&(e=t.getAttribute("is"),t.localName.includes("-")||e&&e.includes("-")))(t)&&(d(i)||c(i))?JSON.stringify(i):i)},a=t=>l(t.replace(/([A-Z])/g,"-$1")),f=t=>t.replace(/-(\w)/g,(t,e)=>(t=>t.toUpperCase())(e)),c=Array.isArray,d=t=>"[object Object]"===Object.prototype.toString.call(t),b=t=>"function"==typeof t,m=t=>"string"==typeof t,p=(t,e,i)=>t.removeEventListener(e,i),v=(t,e,i)=>Object.defineProperty(t,e,i),y=(t,e)=>{for(let i in e)t[i]=e[i];return t},g="___";h(` .${g} {visibility: inherit;}`,!0);var S=(t,e)=>t.removeChild(e),w=(t,e,i)=>t.insertBefore(e,i),j={},C=[],O=C.map,N="#document-fragment",$=(t,e)=>e,k=function(t){this.handlers[t.type](t)},x=t=>{if(!(t=>0===Object.keys(t||{}).length)(t.handlers))for(let e in t.handlers)p(t,e,k),delete t.handlers[e]},A=t=>{x(t),[].concat(...t.childNodes).forEach(t=>{x(t),A(t)})},_=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|^--/i,E=(t,e,i)=>{"-"===e[0]?t.setProperty(e,i):t[e]="number"==typeof i&&!1===_.test(e)?i+"px":i},B=(t,e,i)=>(t=>t?t.split(/\s+/).filter(t=>t):[])(d(e)?((t,e)=>{e="";for(let i in t)t[i]&&(e+=(e&&" ")+i);return e})(e):e).forEach(e=>{g!==e&&t.classList[i](e)}),H=(t,e,i,s,r)=>{if("key"===e);else if(!e.startsWith("on")||e in t)"ref"===e?b(s)?s(t):s=t:"style"===e?((e,i,s,l)=>{if(l=t.style,m(i))return l.cssText=i;if(m(s)&&(l.cssText="",s=null),s)for(let t in s)i&&t in i||E(l,t,"");if(i)for(let t in i)s&&i[t]===s[t]||E(l,t,i[t])})(0,s,i):"className"===e||"class"===e?(B(t,i,"remove"),B(t,s,"add")):!r&&"list"!==e&&e in t?t[e]=null==s?"":s:u(t,e,s);else{let r=l(e)in t?l(e.slice(2)):l(e[2])+e.substring(3);s?(i||((t,e,i)=>t.addEventListener(e,i))(t,r,k),(t.handlers||(t.handlers={}))[r]=s):p(t,r,k)}},J=(l,r)=>{var n=3===l.type?s(l.name):(r=r||"svg"===l.name)?t.createElementNS("http://www.w3.org/2000/svg",l.name):l.name===N?t.createDocumentFragment():e(l.name),h=l.props;for(var o in h)H(n,o,null,h[o],r);for(var u=0,a=l.children.length;u<a;u++)i(n,J(l.children[u],r));return l.node=n},R=t=>null==t?null:t.key,T=t=>(A(t),t.destroy&&t.destroy(t),t),q=(t,e,i,s,l)=>{if(i===s);else if(null!=i&&3===i.type&&3===s.type)i.name!==s.name&&(e.nodeValue=s.name);else if(null==i||i.name!==s.name)e=w(t,J(s,l),e),null!=i&&S(t,T(i.node));else{var r,n,h,o,u=i.props,a=s.props,f=i.children,c=s.children,d=0,b=0,m=f.length-1,p=c.length-1;for(var v in l=l||"svg"===s.name,((t,e,i)=>{for(var s in i={},t)i[s]=t[s];for(var s in e)i[s]=e[s];return i})(u,a)){var y=u[v],g=a[v];(["value","selected","checked"].includes(v)?e[v]:y)!==g&&H(e,v,y,g,l)}for(;b<=p&&d<=m&&null!=(h=R(f[d]))&&h===R(c[b]);)q(e,f[d].node,f[d++],c[b++],l);for(;b<=p&&d<=m&&null!=(h=R(f[m]))&&h===R(c[p]);)q(e,f[m].node,f[m--],c[p--],l);if(d>m)for(;b<=p;)w(e,J(c[b++],l),(n=f[d])&&n.node);else if(b>p)for(;d<=m;)S(e,T(f[d++].node));else{for(var j=d,C={},O={};j<=m;j++)null!=(h=f[j].key)&&(C[h]=f[j]);for(;b<=p;)h=R(n=f[d]),o=R(c[b]),O[h]||null!=o&&o===R(f[d+1])?(null==h&&S(e,T(n.node)),d++):null==o||1===i.type?(null==h&&(q(e,n&&n.node,n,c[b],l),b++),d++):(h===o?(q(e,n.node,n,c[b],l),O[o]=!0,d++):null!=(r=C[o])?(q(e,w(e,r.node,n&&n.node),r,c[b],l),O[o]=!0):q(e,n&&n.node,null,c[b],l),b++);for(;d<=m;)null==R(n=f[d++])&&S(e,T(n.node));for(var j in C)null==O[j]&&S(e,T(C[j].node))}}return s.node=e},z=(t,e,i,s,l,r)=>({name:t,props:e,children:i,node:s,type:r,key:l}),F=(t,e)=>z(t,j,C,e,null,3),L=t=>3===t.nodeType?F(t.nodeValue,t):z(l(t.nodeName),j,O.call(t.childNodes,L),t,null,1),M=(t,e)=>((t=q(t.parentNode,t,t.vdom||L(t),e)).vdom=e,t),P=function(t,e){for(var i,s=[],l=[],r=arguments.length;r-- >2;)s.push(arguments[r]);for(;s.length>0;)if(c(i=s.pop()))for(r=i.length;r-- >0;)s.push(i[r]);else!1===i||!0===i||null==i||l.push(d(i)?i:F(i));return e=e||j,b(t)?t(e,l):z(t,e,l,null,e.key)};let Z=Symbol(),D=Symbol(),G={},I="adoptedStyleSheets"in document;class K extends HTMLElement{constructor(){super(),this.context=G,this.t=[],this.state={},this.Host=(t,e)=>{this.i=!0;let i={},s=0,l=this.attributes;for(s=l.length;s--;){let t=l[s].name;i["class"===t?"className":t]=l[s].value}for(let e in t)H(this,e,i[e],t[e]);return P(N,{},e)},this.setState=t=>{y(this.state,b(t)?t(this.state):t||{}),this.update()},this.observeObi=(...t)=>t.forEach(t=>t.$onChange&&this.t.push(t.$onChange(this.update))),this.update=()=>(this.s||(this.s=this.l.then(t=>{this.h?this.o():this.u(),this.s=!1})),this.s),this.m=()=>[y({Host:this.Host,CSS:this.CSS,host:this},this[Z]),this.state,this.context],this.u=()=>{let t=this.m();this.willRender(...t);let s=this.render(...t),l=e(this.i?"template":s.name);i(this.p,l),this.v=M(this.i?this.p:l,s),this.didRender(...t),this.h=!0,requestAnimationFrame(()=>{this.t.push(this.lifeCycle()),this.classList.add(g)})},this.o=()=>{let t=this.m(),e=this.willRender();(e||void 0===e)&&(M(this.i?this.p:this.v,this.render(...t)),this.didRender(...t))},this.emit=(t,e,i)=>(i||this).dispatchEvent(new CustomEvent(t,{detail:e,bubbles:!0,composed:!0})),this.destroy=t=>{this.g||(t&&A(t),this.t.forEach(t=>b(t)&&t()),this.g=!0)},this.p=this.attachShadow({mode:"open"}),this[Z]={},this.render=this.render.bind(this),this.l=new Promise(t=>this.S=t),this.update();let{j:t,C:s}=this.constructor,l=t.length;for(;l--;)t[l](this);I&&(this.p.adoptedStyleSheets=[s]),this.CSS=({updatable:t,css:e},i)=>{let l=e||i;return l?I?(0===s.cssRules.length&&s.replaceSync(l),null):P("style",null,l):null}}connectedCallback(){this.h||(this.state.$onChange&&this.t.push(this.state.$onChange(this.update)),this.observe&&this.observeObi(this.observe),this.S())}attributeChangedCallback(t,e,i){t!==this[D]&&e!==i&&(this[f(t)]=i)}static get observedAttributes(){let{propTypes:t,prototype:e}=this;return this.j=[],t?Object.keys(t).map(i=>{let s=a(i),l=t[i].name?{type:t[i]}:t[i];return i in e||v(e,i,{get(){return this[Z][i]},set(t){let{value:e,error:r}=o(t,l.type);if(r&&null!=e)throw`[${i}] must be type [${l.type.name}]`;e!==this[Z][i]&&(l.reflect&&this.l.then(()=>{this[D]=s,u(this,s,l.type!==Boolean||e?e:null),this[D]=!1}),this[Z][i]=e,this.update())}}),l.value&&this.j.push(t=>t[i]=l.value),s}):[]}lifeCycle(){}willRender(){}render(){}didRender(){}disconnectedCallback(){!this.isConnected&&!this.g&&this.destroy()}}const Q=(t,e,i)=>{var s,l;(t=>h(`${t} {visibility:hidden}`))(t);const r=I&&new CSSStyleSheet,n=e.prototype instanceof K;return n&&(e.C=r),customElements.define(t,n?e:(l=s=class extends K{constructor(...t){super(...t),this.render=e}},s.propTypes=i,s.C=r,l)),(e,i)=>P(t,e,i)},U=(t,e,i)=>Q("x-"+t,e,i);export{$ as Fragment,K as Xelement,G as context,Q as element,n as globalStyles,P as h,U as x};
//# sourceMappingURL=index.js.map
