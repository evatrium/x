import{appendChild as e,createElement as n,isArray as l,isFunc as r,toLowerCase as o,objectIsEmpty as t,removeListener as a,addListener as s,isObj as d,updateAttribute as i,createTextNode as u,d as f,isString as m,IS_NON_DIMENSIONAL as h}from"./utils.js";var c=(e,n)=>e.removeChild(n),p=(e,n,l)=>e.insertBefore(n,l),v={},y=[],g=y.map,N="#document-fragment",_=(e,n)=>n,k=function(e){this.handlers[e.type](e)},P=e=>{if(!t(e.handlers))for(let n in e.handlers)a(e,n,k),delete e.handlers[n]},w=e=>{P(e),[].concat(...e.childNodes).forEach(e=>{P(e),w(e)})},x=(e,n,l,r)=>{"-"===n[0]?e.setProperty(n,l):e[n]=r?l:((e,n)=>"number"==typeof n&&!1===h.test(e)?n+"px":n)(n,l)},b=(e,n,l)=>(e=>(e=>e?e.split(/\s+/).filter(e=>e):[])(d(e)?((e,n)=>{n="";for(let l in e)e[l]&&(n+=(n&&" ")+l);return n})(e):e))(n).forEach(n=>e.classList[l](n)),E=(e,n,l,t,d)=>{if("key"===n||"children"===n);else if(!n.startsWith("on")||n in e)"ref"===n&&r(t)?t(e):"style"===n?((n,l,r)=>{let o=e.style;if(m(l))return o.cssText=l;if(m(r)&&(o.cssText="",r=null),r)for(let e in r)l&&e in l||x(o,e,"");if(l)for(let e in l)r&&l[e]===r[e]||x(o,e,l[e])})(0,t,l):"className"===n||"class"===n?(b(e,l,"remove"),b(e,t,"add")):!d&&"list"!==n&&n in e?e[n]=null==t?"":t:i(e,n,t);else{let r=o(n)in e?o(n.slice(2)):o(n[2])+n.substring(3);t?(l||s(e,r,k),(e.handlers||(e.handlers={}))[r]=t):a(e,r,k)}},T=(l,r)=>{var o=3===l.type?u(l.name):(r=r||"svg"===l.name)?f.createElementNS("http://www.w3.org/2000/svg",l.name):l.name===N?f.createDocumentFragment():n(l.name),t=l.props;for(var a in t)o.nodeName!==N&&E(o,a,null,t[a],r);for(var s=0,d=l.children.length;s<d;s++)e(o,T(l.children[s],r));return l.node=o},j=e=>null==e?null:e.key,F=e=>(w(e),e.destroy&&e.destroy(e),e),V=(e,n,l,r,o)=>{if(l===r);else if(null!=l&&3===l.type&&3===r.type)l.name!==r.name&&(n.nodeValue=r.name);else if(null==l||l.name!==r.name)n=p(e,T(r,o),n),null!=l&&c(e,F(l.node));else{var t,a,s,d,i=l.props,u=r.props,f=l.children,m=r.children,h=0,v=0,y=f.length-1,g=m.length-1;for(var _ in o=o||"svg"===r.name,((e,n,l)=>{for(var r in l={},e)l[r]=e[r];for(var r in n)l[r]=n[r];return l})(i,u)){var k=i[_],P=u[_];(["value","selected","checked"].includes(_)?n[_]:k)!==P&&r.name!==N&&E(n,_,k,P,o)}for(;v<=g&&h<=y&&null!=(s=j(f[h]))&&s===j(m[v]);)V(n,f[h].node,f[h++],m[v++],o);for(;v<=g&&h<=y&&null!=(s=j(f[y]))&&s===j(m[g]);)V(n,f[y].node,f[y--],m[g--],o);if(h>y)for(;v<=g;)p(n,T(m[v++],o),(a=f[h])&&a.node);else if(v>g)for(;h<=y;)c(n,F(f[h++].node));else{for(var w=h,x={},b={};w<=y;w++)null!=(s=f[w].key)&&(x[s]=f[w]);for(;v<=g;)s=j(a=f[h]),d=j(m[v]),b[s]||null!=d&&d===j(f[h+1])?(null==s&&c(n,F(a.node)),h++):null==d||1===l.type?(null==s&&(V(n,a&&a.node,a,m[v],o),v++),h++):(s===d?(V(n,a.node,a,m[v],o),b[d]=!0,h++):null!=(t=x[d])?(V(n,p(n,t.node,a&&a.node),t,m[v],o),b[d]=!0):V(n,a&&a.node,null,m[v],o),v++);for(;h<=y;)null==j(a=f[h++])&&c(n,F(a.node));for(var w in x)null==b[w]&&c(n,F(x[w].node))}}return r.node=n},B=(e,n,l,r,o,t)=>({name:e,props:n,children:l,node:r,type:t,key:o}),C=(e,n)=>B(e,v,y,n,null,3),D=e=>3===e.nodeType?C(e.nodeValue,e):B(o(e.nodeName),v,g.call(e.childNodes,D),e,null,1),H=(l,r)=>{l.__mountPoint||e(l,l.__mountPoint=n(r.name===N?"template":r.name));let o=r.name===N&&l.nodeName===N?l:l.__mountPoint;return(l=l.__mountPoint=V(o.parentNode,o,o.vdom||D(o),r)).vdom=r,l},L=function(e,n){for(var o,t=[],a=[],s=arguments.length;s-- >2;)t.push(arguments[s]);for(null!=(n=null==n?{}:n).children&&(t.length<=0&&t.push(n.children),delete n.children);t.length>0;)if(l(o=t.pop()))for(s=o.length;s-- >0;)t.push(o[s]);else!1===o||!0===o||null==o||a.push("object"==typeof o?o:C(o));return r(e)?(n.children=n.children||a)&&e(n):B(e,n,a,null,n.key)};export{_ as F,N as H,E as a,L as h,H as p,w as r};
//# sourceMappingURL=common.js.map
