import{appendChild as l,createElement as e,isArray as r,isFunc as n,toLowerCase as f,objectIsEmpty as u,removeListener as t,addListener as o,isObj as i,updateAttribute as s,createTextNode as a,d as v,isString as c,IS_NON_DIMENSIONAL as p}from"./utils.js";var d=(l,e)=>l.removeChild(e),m=(l,e,r)=>l.insertBefore(e,r),y={},g=[],h=g.map,w="#document-fragment",k=(l,e)=>e,b=function(l){this.handlers[l.type](l)},j=l=>{if(!u(l.handlers))for(let e in l.handlers)t(l,e,b),delete l.handlers[e]},x=l=>{j(l),[].concat(...l.childNodes).forEach(l=>{j(l),x(l)})},F=(l,e,r,n)=>{"-"===e[0]?l.setProperty(e,r):l[e]=n?r:((l,e)=>"number"==typeof e&&!1===p.test(l)?e+"px":e)(e,r)},H=(l,e,r)=>(l=>(l=>l?l.split(/\s+/).filter(l=>l):[])(i(l)?((l,e)=>{e="";for(let r in l)l[r]&&(e+=(e&&" ")+r);return e})(l):l))(e).forEach(e=>l.classList[r](e)),N=(l,e,r,u,i)=>{if("key"===e||"children"===e);else if(!e.startsWith("on")||e in l)"ref"===e&&n(u)?u(l):"style"===e?((e,r,n)=>{let f=l.style;if(c(r))return f.cssText=r;if(c(n)&&(f.cssText="",n=null),n)for(let l in n)r&&l in r||F(f,l,"");if(r)for(let l in r)n&&r[l]===n[l]||F(f,l,r[l])})(0,u,r):"className"===e||"class"===e?(H(l,r,"remove"),H(l,u,"add")):!i&&"list"!==e&&e in l?l[e]=null==u?"":u:s(l,e,u);else{let n=f(e)in l?f(e.slice(2)):f(e[2])+e.substring(3);u?(r||o(l,n,b),(l.handlers||(l.handlers={}))[n]=u):t(l,n,b)}},q=(r,n)=>{var f=3===r.type?a(r.name):(n=n||"svg"===r.name)?v.createElementNS("http://www.w3.org/2000/svg",r.name):r.name===w?v.createDocumentFragment():e(r.name),u=r.props;for(var t in u)f.nodeName!==w&&N(f,t,null,u[t],n);for(var o=0,i=r.children.length;o<i;o++)l(f,q(r.children[o],n));return r.node=f},z=l=>null==l?null:l.key,A=l=>(x(l),l.destroy&&l.destroy(l),l),B=(l,e,r,n,f)=>{if(r===n);else if(null!=r&&3===r.type&&3===n.type)r.name!==n.name&&(e.nodeValue=n.name);else if(null==r||r.name!==n.name)e=m(l,q(n,f),e),null!=r&&d(l,A(r.node));else{var u,t,o,i,s=r.props,a=n.props,v=r.children,c=n.children,p=0,y=0,g=v.length-1,h=c.length-1;for(var k in f=f||"svg"===n.name,((l,e,r)=>{for(var n in r={},l)r[n]=l[n];for(var n in e)r[n]=e[n];return r})(s,a)){var b=s[k],j=a[k];(["value","selected","checked"].includes(k)?e[k]:b)!==j&&n.name!==w&&N(e,k,b,j,f)}for(;y<=h&&p<=g&&null!=(o=z(v[p]))&&o===z(c[y]);)B(e,v[p].node,v[p++],c[y++],f);for(;y<=h&&p<=g&&null!=(o=z(v[g]))&&o===z(c[h]);)B(e,v[g].node,v[g--],c[h--],f);if(p>g)for(;y<=h;)m(e,q(c[y++],f),(t=v[p])&&t.node);else if(y>h)for(;p<=g;)d(e,A(v[p++].node));else{for(var x=p,F={},H={};x<=g;x++)null!=(o=v[x].key)&&(F[o]=v[x]);for(;y<=h;)o=z(t=v[p]),i=z(c[y]),H[o]||null!=i&&i===z(v[p+1])?(null==o&&d(e,A(t.node)),p++):null==i||1===r.type?(null==o&&(B(e,t&&t.node,t,c[y],f),y++),p++):(o===i?(B(e,t.node,t,c[y],f),H[i]=!0,p++):null!=(u=F[i])?(B(e,m(e,u.node,t&&t.node),u,c[y],f),H[i]=!0):B(e,t&&t.node,null,c[y],f),y++);for(;p<=g;)null==z(t=v[p++])&&d(e,A(t.node));for(var x in F)null==H[x]&&d(e,A(F[x].node))}}return n.node=e},C=(l,e,r,n,f,u)=>({name:l,props:e,children:r,node:n,type:u,key:f}),D=(l,e)=>C(l,y,g,e,null,3),E=l=>3===l.nodeType?D(l.nodeValue,l):C(f(l.nodeName),y,h.call(l.childNodes,E),l,null,1),G=(r,n)=>{r.l||l(r,r.l=e(n.name===w?"template":n.name));let f=n.name===w&&r.nodeName===w?r:r.l;return(r=r.l=B(f.parentNode,f,f.vdom||E(f),n)).vdom=n,r},I=function(l,e){for(var f,u=[],t=[],o=arguments.length;o-- >2;)u.push(arguments[o]);for(null!=(e=null==e?{}:e).children&&(u.length<=0&&u.push(e.children),delete e.children);u.length>0;)if(r(f=u.pop()))for(o=f.length;o-- >0;)u.push(f[o]);else!1===f||!0===f||null==f||t.push("object"==typeof f?f:D(f));return n(l)?(e.children=e.children||t)&&l(e):C(l,e,t,null,e.key)};export{k as F,w as H,N as a,I as h,G as p,x as r};
//# sourceMappingURL=common.js.map
